{% extends 'main-form.html' %}
{% load static %}
{% block title %}CRUD Product{% endblock title %}
{% block style %}
{% endblock style %}
{% block content %}
<br>
<div class="container">
    <div class="row">
        <div class="col-sm">
            <table class="table table-image text-center">
                <thead>
                    <tr>
                        <th scope="col">Image</th>
                        <th scope="col">Product Name</th>
                        <th scope="col">Quantity</th>
                        <th scope="col">Price</th>
                        <th scope="col">Color</th>
                        <th scope="col">Size</th>
                        <th scope="col">Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for p in products %}
                    <tr>
                        <td class="w-25">
                            <img src="{% if p.img_photo1.url is not null %}
                            {{ p.img_photo1.url }}
                        {% else %}
                            {% static 'img/img-404.png' %}
                        {% endif %}"  width="25%" class="img-fluid img-thumbnail" alt="Sheep">
                        </td>
                        <td>{{ p.tx_product_name }}</td>
                        <td>0</td>
                        <td>${{ p.nm_sale_unit }}</td>
                        <td>{{ p.color }}</td>
                        <td>{{ p.size }}</td>
                        <td>
                            <button onclick="open_modal_edit('{% url 'edit-product' p.id %}')" class="btn btn-primary">
                                <i class="fa fa-edit"></i>
                                Edit
                            </button>
                            <a href="#" class="btn btn-danger">
                                <i class="fa fa-trash"></i>
                                Delete
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <!-- PAGINATION -->
    {% if is_paginated %}
    <nav aria-label="Pagination">
        <ul class="pagination justify-content-center">
            {% if page_obj.has_previous %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous page">
                    Previous Page
                </a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link" href="#" aria-disabled="true">Previous page</a>
            </li>
            {% endif %}

            {%  for page in paginator.page_range %}
            {% ifequal page page_obj.number %}
            <li class="page-item active" aria-current="page">
                <a class="page-link" href="?page={{ page }}">{{ page }}
                    <span class="sr-only">(current)</span>
                </a>
            </li>
            {% else %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page }}" aria-label="Page">{{ page }}</a>
            </li>
            {% endifequal %}
            {% endfor %}

            {% if page_obj.has_next %}
            <li class="page-item">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next page">
                    Next page
                </a>
            </li>
            {%else%}
            <li class="page-item disabled">
                <a class="page-link" href="#" aria-disabled="true">Next page</a>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}
   
</div>

<div class="modal fade" id="edit" role="dialog">
    
</div>

{% endblock content %}

{% block extrajs %}
<script type="text/javascript">

    var $ = jQuery.noConflict();

    function open_modal_edit(url){
        $('#edit').load(url, function(){
            $(this).modal('show');
        });
    }
</script>
{% endblock extrajs %}